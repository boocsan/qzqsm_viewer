<script setup lang="ts">
import { getBinaryString } from "~/plugins/string_converter";
import { parse, verifyChecksum } from "~/plugins/qzqsm_parser";

// const sentence = "$QZQSM,57,9aac8898960003240000312c05377c5ac00001000000000100000012ff02f88*71"; // 緊急地震速報
// const sentence = "$QZQSM,61,C6AF8C9820000324000030400548C5E2C000000003DFF8001C0000125E59614*71"; // 緊急地震速報
const sentence = "$QZQSM,61,9AAF949822800388000030451440C5C82A0108300000000000000010D5D4E0C*7A"; // 震源
// const sentence = "$QZQSM,61,53AF9C98228001822CB25AE775A8D4CA854AB8000000000000000011418F98C*0F"; // 震度
// const sentence = "$QZQSM,61,C6AFAC98228001E8F67C30453960114E620453BE0000000000000011F29A298*03"; // 津波
// const sentence = "$QZQSM,61,C6AFAC982C8001E8F67C30593960164E620593BBC164EF80000000102C57BD0*72"; // 津波
// const sentence = "$QZQSM,61,C6AFAC983180019C00002063396018CE620633BBC18CEF800000001090E7374*0D"; // 津波
// const sentence = "$QZQSM,61,C6AFC498450001845341F783E0F10910421230200000000000000010CBEDD04*7D"; // 火山
// const sentence = "$QZQSM,61,9AAFCC9845000184523EE4C1F078261220813091810000000000001148A4C18*07"; // 降灰
// const sentence = "$QZQSM,61,C6AFCC984A000184A43EE541F0782A1220813091811183E0F000001252DAFDC*76"; // 降灰
// const sentence = "$QZQSM,61,C6AFCC984A000184A43EE8C2441046123023307C1E198488200000131FD48E0*08"; // 降灰
// const sentence = "$QZQSM,61,9AAFCC984A000184A43EECC24604860F83C430910421848C080000139338198*73"; // 降灰
// const sentence = "$QZQSM,61,53AFCC984A000184A43EF4C1F078A61220853091813183E0F000001033AB510*04"; // 降灰
// const sentence = "$QZQSM,61,C6AFCC984A000184A43EF8C24410C61230200000000000000000001091888FC*06"; // 降灰
// const sentence = "$QZQSM,61,C6AFD498518001113880115F901186A011ADB011D4C011FBD0000012A2FD7E4*7B"; // 気象
// const sentence = "$QZQSM,61,9AAFD4985180011222E0B93880B95F90B986A0B9ADB0B9D4C00000130AD84F8*7A"; // 気象
// const sentence = "$QZQSM,61,53AFD498518001B9FBD0BA22E0000000000000000000000000000013AE90114*78"; // 気象
// const sentence = "$QZQSM,61,C6AFDC9851800160A8F55286000000000000000000000000000000103DACAA0*7B"; // 洪水
// const sentence = "$QZQSM,61,C6AFDC98590000E0A8F5528600000000000000000000000000000012F87BD74*02"; // 洪水

const qzqsm = ref(sentence);
const checksum = ref(verifyChecksum(sentence));
const binary = ref(getBinaryString(sentence.split("*")[0].split(",")[2]));

const parsed = parse(sentence);

const body = parse(sentence).body;
</script>

<template>
  <div>qzqsm: {{ qzqsm }}</div>
  <div>parsed: {{ binary }}</div>
  <div>checksum: {{ checksum }}</div>
  <div>parsed: {{ parsed }}</div>
  <pre>body:
{{ body }}</pre>
</template>

<style lang="scss">
div {
  width: 100%;
  word-break: break-all;
}
</style>
